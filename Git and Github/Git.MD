# GIT NOTE

## Linki

[Podstawowe polecenia](https://training.github.com/downloads/pl/github-git-cheat-sheet/)

[GIT Manual](https://git-scm.com/book/en/v2)

[GIT Manual PL](https://git-scm.com/book/pl/v2)

[GIT Aliases](https://github.com/ohmyzsh/ohmyzsh/blob/master/plugins/git/README.md#aliases)

[GIT School Visualizing](https://git-school.github.io/visualizing-git/#free)

[Przykadowe pliki .gitignore](https://github.com/github/gitignore)

## Pomoc

```bash
git help <verb>
git <verb> --help
man git-<verb>
```

### Czym jest GIT

Git jest systemem kontroli wersji *VCS*  (Version Control System), umo偶liwia ledzenie wprowadzonych zmian w plikach w czasie.

### Cechy

- Migawki, nie r贸偶nice
- Niemal ka偶da operacja jest lokalna
- Git ma wbudowane mechanizmy sp贸jnoci danych (SHA-1)
- Standardowo Git wycznie dodaje nowe dane

### Mo偶liwoci

- Cofanie zmian w pliku lub caego projektu.
- Umo偶liwia podgld zmian kt贸re zostay wprowadzone na przestrzeni czasu.
- Umo偶liwia wsp贸prac i podgld kto wprowadzi zmiany.
- Umo偶liwia podgld powodu wprowadzonej zmiany.
- Mo偶e by wykorzystany dla dowolnego typu pliku, nie tylko dla kodu 藕r贸dowego.

### Zalety

- Szybko
- Prosta konstrukcja
- Silne wsparcie dla nieliniowego rozwoju (tysicy r贸wnolegych gazi)
- Pene rozproszenie
- Wydajna obsuga du偶ych projekt贸w, takich jak jdro Linuksa (szybko i rozmiar danych)

## Wady

- Brak kontroli dostpu.
- Brak blokowania pliku nad kt贸rym si pracuje (czasem zaleta bo lepiej rozwiza konflikty ni偶 blokowa prac).
- Problem z plikami du偶ych rozmiar贸w (pobieranie wszystkich z centralnego repozytorium).
- Nie jest zbyt przyjazny dla u偶ytkownika (wysoki pr贸g wejcia)

## Instalacja i konfiguracja

### Windows

- Instalacja za pomoc instalatora [Instalator](https://git-scm.com/download/win)
- Instalacja za pomoc `winget install git`

### Systemy linux oparte na dystrybucji debian

```bash
sudo apt update
sudo apt upgrade
sudo apt install git
```

## Konfiguracja

Kolejno pobierania konfiguracji:

1. Folder projektu
2. Folder u偶ytkownika
3. Folder systemowy

```markdown
git config --local user.name
git config --global user.name
git config --system user.name
```

### Konfiguracja adresu email i nazwy u偶ytkownika

```bash
# Ustawienie to偶samoci
git config --global user.name "John Doe"
git config --global user.email johndoe@example.com

# Ustawienie visual studio jako domylny edytor
git config --global core.editor "code --wait"

# sprawdzenie bie偶cych ustawie
git config --list
# Wywietlenie konfiguracji wraz z informacj o 藕r贸dle jej pochodzenia
git config --list --show-origin
```

### Ustawienie vsc jako edytor podgldu zmian

```bash
# .gitconfig w katalogu u偶ytkownika
git config --global -e

# lub
git config --edit --global
```

### Konfiguracja Visual Studio Code

> Konfiguracja VS Code jako domylnego edytora:

```markdown
git config --global core.editor "code --wait"
```

> Konfiguracja VS Code jako Git diff tool:

```bash
# .gitconfig
[diff]
    tool = default-difftool
[difftool "default-difftool"]
    cmd = code --wait --diff $LOCAL $REMOTE
```

### Instalacja git-aliases dla powershell

```powershell
Install-Module git-aliases -Scope CurrentUser -AllowClobber
```

Jeli podczas instalacji wystpi bd konieczna bdzie zmiana uprawnie

```powershell
Set-ExecutionPolicy RemoteSigned -Scope CurrentUser
```

Konieczne jest dodanie importu w pliku profilu:

```powershell
code $PROFILE
```

```conf
Import-Module git-aliases -DisableNameChecking
```

## Przepyw pracy

1. Pobranie kodu z serwera kontroli wersji
2. Dodanie wasnego kodu
3. Pobranie zmian z serwera jeli kto pracowa na tym samym pliku
4. Rozwizanie konflikt贸w
5. Wysanie zmian na serwer

### Stany w kt贸rych mog znajdowa si pliki

- **Zatwierdzony** oznacza, 偶e dane zostay bezpiecznie zachowane w Twojej lokalnej bazie danych.
- **Zmodyfikowany** oznacza, 偶e plik zosta zmieniony, ale zmiany nie zostay wprowadzone do bazy danych.
- **ledzony** - oznacza, 偶e zmodyfikowany plik zosta przeznaczony do zatwierdzenia w bie偶cej postaci w nastpnej operacji commit.

### Obszary robocze

- **Folder roboczy:** Lokalizacja na dysku w kt贸rym przechowywane s bie偶ce pliki i foldery, pliki s tworzone, modyfikowane lub kasowane.
- **Poczekalnia:** Miejsce do kt贸rego trafiaj pliki przed zatwierdzeniem. Znajduje si pomidzy obszarem roboczym a repozytorium. (Polecenie `add` dodaje pliki do poczekalni a `commit` przenosi je do repozytorium).
- **Repozytorium:** Cae repozytorium Git przechowywane jest w katalogu `.git`. Przechowuje on zatwierdzenia oraz ca historie projektu.

Katalog `objects` wewntrz katalogu `.git` przechowuje r贸偶ne typy obiekt贸w:

- blob (zawarto plik贸w w pewnym momencie historii)
- tree (reprezentuj foldery w projekcie)
- commit (s tworzone za ka偶dym razem kiedy wykonujemy zatwierdzenie commit)

:bulb: Wszystkie te obiekty s niezmienne, mo偶na je dodawa, usuwa ale nigdy nie mo偶na ich zmieni.

### Inicjalizacja nowego repozytorium GIT

Polecenie `git init` stworzy nowy podkatalog o nazwie `.git`, zawierajcy wszystkie niezbdne pliki.

:exclamation: Nie nale偶y inicjalizowa repozytorium w ju偶 istniejcym repozytorium.

```bash
# Inicjalizacja nowego reppozytorium
git init

# Inicjalizacja nowego repozytorium bez folderu roboczego
git init --bare
```

### Klonowanie istniejcego repozytorium GIT

```bash
git clone https://github.com/libgit2/libgit2

# Zapisanie repozytorium w katalogu o wybranej nazwie
git clone https://github.com/libgit2/libgit2 <my_folder_name>
```

### Sprawdzanie stanu plik贸w

```bash
# Wersja pena
## gst
git status

# Wersja skr贸cona
## gss
git status -s

# Szczeg贸y commita
git show <hash_commit>
```

### ledzenie nowych plik贸w

Po dodaniu nowego pliku do obszaru roboczego Git sygnalizuje 偶e widzi nowy plik ale nie jest jeszcze przez niego ledzony (untracked).
Aby git m贸g go ledzi konieczne jest dodanie go do indeksu za pomoc `git add <file_name`.

```bash
# Dodanie wszystkich plik贸w
git add .

# Dodanie jednego pliku
git add <file_name>
```

Od teraz Git ledzi dodane pliki po edycji nale偶y kolejny raz doda zmiany doda je do `staging area`

```bash
git add .
# lub
git add <file_name>
```

### Dodawanie zmodyfikowanych plik贸w do poczekalni

```bash
# Dodanie zmian w plikach do poczekalni
git add .
git add -A

# Dodanie zmian w pojedynczym pliku do poczekalni
git add <file_name>

# Dodanie katalogu
git add folder/

# Podzielenie zmian na porcje kt贸re maj trafi do poczekalni
git add --patch <file_name>
```

:bulb: Wszystko co zostao dodane do poczekalni trafi do nastpnego zatwierdzenia.

### Ignorowanie plik贸w

Jeli chcemy wykluczy pliki lub foldery z repozytorium git nale偶y utworzy plik `.gitignore` i doda reguy co ma by ignorowane w folderze roboczym. Istnieje mo偶liwo pobrania gotowych szablon贸w dla r贸偶nych jzyk贸w i rodowisk programistycznych [link](https://github.com/github/gitignore). W VS Code mo偶emy pobra rozsze偶enie ktore wygeneruje ten plik automatycznie.

### Podgld zmian w poczekalni i poza ni

Polecenie `git diff` su偶y do por贸wnywania zmian pomidzy trzema obszarami w kt贸rych mog znajdowa si pliki (folderem roboczym, poczekalni, repozytorium)

```bash
# Narzdzie diftool
git difftool

# Por贸wnuje zmiany pomidzy katalogiem roboczym a poczekalni
git diff

# Por贸wnuje zmiany pomidzy plikami znajdujcymi si w poczekalni i tymi kt贸re s w repozytorium
git diff --cached

# Por贸wnuje zmiany od ostatniego zatwierdzeniem (zmiany kt贸re s aktualnie w poczekalni i katalogu roboczym)
git diff HEAD

# Por贸wnuje zmiany pomidzy ostatnim zatwierdzeniem a plikami znajdujcymi si w poczekalni
git diff --staged

# Sprawdza zmiany pomidzy gaziami
git diff <branch1_name> <branch2_name>

# Sprawdza zmiany w konkretnym pliku pomidzy gaziami
git diff <branch1_name> <branch2_name> <file_name>

# Sprawdza r贸偶nic pomidzy dwoma zatwierdzeniami
git diff <commit> <commit>

# Ignoruje biae znaki
git diff -w

# Sprawdzenie r贸偶nicy pomidzy aktualnym zatwierdzeniem a wczeniejszym (dwa zatwierdzenia)
git diff HEAD HEAD~2
```

### Zatwierdzanie zmian

```bash
# Uruchomienie przed zatwierdzeniem domylnego edytora, kt贸ry umo偶liwi wprowaszenie komentarza do zmian
git commit

# Zatwierdzenie zmian z poczekalni
git commit -m "Messaage"

# Automatyczne dodanie zmian do poczekalni podczas zatwierdzenia
git commit -am "Message"
```

:bulb: Ka偶dy plik kt贸ry zosta utworzony lub zmodyfikowany, a na kt贸rym p贸藕niej nie zostao uruchomione `git add` nie zostanie uwzgldniony w zatwierdzeniu.

### Usuwanie pliku

Aby usun plik z Gita, nale偶y go najpierw wyrzuci ze zbioru plik贸w ledzonych, a nastpnie zatwierdzi zmiany.

Jeli usuniemy plik systemowo git zobaczy 偶e go nie ma i podczas sprawdzania poleceniem `git status` zaoferuje opcje przywr贸cenia, usunicia lub dodania zmian do staging area.

```bash
# Usuwa plik z poczekalni ale zachowuje go w katalogu roboczym, po tym poleceniu plik przestaje by ledzony przez Git
git rm --cached

# Usuwa plik z poczekalni oraz katalogu roboczego
git rm -f

# Pokazuje kt贸re nieledzone pliki zostan usunite z katalogu roboczego
git clean -dn

# usuwa plik nieledzone z katalogu roboczego
git clean -df
```

### Zmiana nazwy pliku

Zmiana nazwy poprzez polecenie systemowe:

Po zamienie nazwy `git status` zobaczy star nazw jako plik usunity a now jako plik dodany, przy wykonaniu `git add` zmiani si status na `renamed`.

```bash
mv <old_file_name> <new_file_name>
```

Mo偶emy r贸wnie偶 wykorzysta polecenie wbudowane w Git:

```bash
git mv <old_file_name> <new_file_name>
```

Bdzie to r贸wnowa偶ne w wykonaniem polece

```bash
mv File.txt File
git rm File.txt
git add File
```

### Podgld historii rewizji

Domylnie, polecenie git log uruchomione bez argument贸w, listuje zmiany zatwierdzone w tym repozytorium w odwrotnej kolejnoci chronologicznej, czyli pokazujc najnowsze zmiany w pierwszej kolejnoci.

```bash
# Wszystkie zmiany
## glgg
git log

# Liczba ostatnich zmian
git log -3

# Zmiany w jednej lini
## glog
git log --oneline

# Pokazuje log dla wybranej gazi
git log <branch_name> --online

# Zmiany w jednej linii z przedstawieniem graficznym gazi
git log --graph --decorate --oneline

# Zmiany dla commit na kt贸rym jest znacznik HEAD
git log HEAD

# Zmiany dla commit na kt贸rym jest rodzicem dla aktualnego HEAD
git log HEAD^

# Cofnij si o dwa commity od HEAD i go poka偶
git log HEAD~2
```

Zmiany Szczeg贸owe:

```bash
# zmiany szczeg贸owe
## glg
git log --stat

# zmiany wraz ze ze zmodyfikowanymi wartociami w plikach
## glgp
git log --stat -p
```


---------------
REFACTOR
---------------

Zwykle przepyw pracy odbywa si ze strony lewej do prawej
`working directory` -> `index` -> `repository`

Jeli chcemy zmieni kierunek przepywu mo偶emy wykorzysta polecenie `git checkout`.

Pozwala ono na:

* Zmian poo偶enia wska藕nika `HEAD` na inna ga藕 (porednio bdzie wskazywao na wybrany commit na tej gazi)
* Pobierze dane z tego zatwierdzenia i przywr贸ci (skopiuje) z niego pliki do katalogu roboczego i indeksu (pliki we wszystkich obszarach s identyczne i zgodne z commitem na kt贸ry wskazuje `HEAD`).


> Stash
Schowek w kt贸rym mo偶emy umieszcza plik kt贸re nie s dodane jeszcze do indeksu

Zatwierdzenie to migawka obszaru roboczego w danym momencie. R贸偶ne zatwierdzenia mog dzieli wsp贸lne obiekty.
W historii ka偶de zatwierdzenie wskazuje na swojego rodzica.

Gazie s referencjami do okrelonych zatwierdze (commit). Zatwierdzenie mo偶e nale偶e do wielu gazi.

Wska藕nik `HEAD` jest tylko jeden, zwykle wskazuje na bie偶c ga藕 ze znajdujcym si na niej zatwierdzeniem



G贸wna ga藕 to `Main` (dawniej Master)

Repozytoria

* Lokalne (Local)
* Zdalne (Origin)

### Detached HEAD

Znacznik `HEAD` zwykle wskazuje na branch, ale Git mo偶e pracowa r贸wnie偶 w trybie `odczonej gowy`, oznacza to 偶e wska藕nik `Head` nie zawsze musi wskazywa na ga藕. Mo偶e wskazywa na konkretny commit poprzez polecenie `git checkout <hash_commit>` (mo偶e to by aktualny commit).
Mo偶emy wtedy dodawa kod i eksperymentowa, jeli nie zdecydujemy si na zapisanie zmian wska藕nik przeczamy na ga藕 np. `main` poprzez `git switch main`
Niezapisane commity przestan po jakim czasie istnie w bazie danych wyczyszczone przez **garbage collector**, mo偶emy je jednak zapisa na nowej gazi korzystajc z ich **hash** do p贸ki s widoczne w logach konsoli.
W trybie odczonej gowy nadal mo偶emy tworzy commity, nale偶y w贸wczas przenie si na wybrany commit `git checkout <hash_commit` i przypi go do jakiego brancha np. `git checkout <branch_name` lub wykona `merge` do istniejcej gazi.

Miejsce wska藕nika mo偶emy sprawdzi za pomoc `git branch`.

## REBASE

> :exclamation: Nie nale偶y u偶ywa `rebase` na gaziach publicznych

* Oczyszczanie historii gazi przed jej wysaniem
* Pobranie zmian z jednej do drugiej gazi bez `merge`

### Zmiany historii lokalnej przed wysaniem zmian do zdalnego repozytorium

## Dodanie kolejnych zmian w projekcie / pliku do wczeniejszego commit

```bash
git commit --amend
```

:bulb: Podczas commit z parametrem `amend` git nie modyfikuje ostatniego commit poniewa偶 s one niezmienne zamiast tego tworzy now kopie z dodan zawartoci i przenosi nia ni znacznik `HEAD`, stary commit zostanie w przyszoci usunity przez **garbage collector**. Dziaa tylko dla ostatniego zatwierdzenia.

:exclamation: Polecenie zmienia historie wic stosujemy tylko na gaziach lokalnych.

Jeli chcemy naprawi/zmieni historie wczeniejszych commit贸w musimy upewni si 偶e zmiany nie zostay wysane jeszcze do repozytorium zdalnego.

<!-- Tworzymy nowy commit kt贸ry w kt贸rym dodajemy wymagane zmiany a nastpnie wykorzystujemy polecenie rebase w trybie **interactive** -->

:bulb: Interaktywny **rebase** mo偶emy wykorzysta do edycji/poprawy/scalenia historii przed wysaniem do zdalnego repozytorium.

```bash
# wybieramy commit poni偶ej tego od kt贸rego chcemy zmieni histori
git rebase -i <hash_commit>
```

### MERGE i REBASE

> Narzdzie scalania

```bash
git mergetool
```

Scalanie `merge` polega na poczeniu dw贸ch gazi w jedn, czyli na. wczenie gazi z nowymi funkcjonalnociami do gazi `main`. Gdy jestemy na gazi main wykonujemy czenie za pomoc komendy `git marge <feature_branch>`. czenie za pomoc samego `merge` tworzy now migawk kt贸ra jest wsp贸lna dla obydwu gazi.

Innym sposobem czenia jest `rebase`.
 Polega to na zacigniciu zmian z poziomu `feature` z gazi `main` poprzez `git rebase master`, a nastpnie wykonania scalenia z poziomu gazi `main` poleceniem `git merge feature`. Przy tym sposobie commity zachowuj swoj histori zmian. Przy stosowaniu tego sposobu wa偶ne jest czste zaciganie/rebase zmian z gazi master aby unika du偶ej iloci konflikt贸w przy czeniu.

:exclamation: Historia jest zachowana na jednej lini czasowej ale nie odzwierciedla dokadnie tego co si dziao w projekcie

* `git switch main` Aktualizujemy main `git pull --rebase` (przy korzystaniu z repozytorium zdalnego)
* Zamieniamy branch `git switch feature` a nastpnie `git rebase main`
* Zmieniamy ga藕 na main `git switch main` i scalamy `git merge feature`

### Cherry Pick

> `git cherry-pick` skopiowa commita (bd藕 kilka commit贸w) z jednego brancha na drugi

```bash
git cherry-pick <hash_commit>

# po naprawieniu konfliktu
git cherry-pick --continue
```

### TAGI

Tagi to rodzaj zakadki przy pomocy kt贸rych mo偶emy oznacza wa偶ne commity. Najczciej oznaczmy commity kt贸re wskazuj koniec pracy nad dan funkcjonalnoci lub kolejn wersj aplikacji.

Tagi dzielimy na dwie kategorie

* lekkie (bez adnotacji)
* z adnotacj (tworz w strukturze dodatkowe miejsce na zapisanie dodatkowych danych)

Flaga `a` dodaje dodatkowe adnotacje np. o autorze

```bash
# Dodanie tag
# a - annotation
# m - message
git tag <tag_name> -a -m <message>

# Dodanie tag do dowolnego commit mo偶na doda r贸wnie偶 -a -m
## git tag v1.0 3432340
git tag <tag_name> <hash_commit>

# Wywietlenie tag贸w
git tag

# Tag bez adnotacji
git tag <tag_name>


# dodatkowe informacje o commit na kt贸ry wskazuje TAG
git show <tag_name>

# Usunicie Tagu
git tag -d <tag_name>

# Wysanie samych tag贸w do zdalnego repozytorium
git push --tags

# Usuwanie tagu ze zdalnego repozytorium
## git push -d origin v1.0
git push -d <remote_repository_name> <tag_name>
```

## Polecenia systemowe

```bash
# aktualny katalog roboczy
pwd
```

## Praca z GIT Command Line

> Zatwierdzenie zmian z komentarzem

```bash
git commit -m "Init Commit"
```

> Dodanie lokalnego repozytorium do repozytorium zdalnego GitHub

```bash
git remote add origin https://github.com/{user}/{repo-name}.git

# Zmiana nazwy gazi
git branch -M main
git push -u origin main
```

## Podstawowe komendy



> Wywietla pliki w katalogu
W zale偶noci od przecznika wywietla wybrane pliki w katalogu
[git ls-files](https://git-scm.com/docs/git-ls-files)

```bash
# Wszystkie ledzone pliki
git ls-files

```

## Odzyskiwanie utraconych zmian

Reflog pozwala na dokadne przegldanie historii (po kt贸rych elementach porusza si znacznik `HEAD`). mo偶emy z niego odzyska dane np. hash zmian kt贸re zostay wprowadzone poprzez wykorzystanie interaktywnego rebase. Dane s widoczne do momentu zebrania ich przez **garbage collector**.
Reflog zawiera dane lokalne.

mo偶emy r贸wnie偶 odzyska dane poprzez

```bash
git reflog
git checkout <hash>
git switch -c <new_branch_name>
git checkout main
git merge <branch>
git branch -d <branch>
```

```bash
git reflog
```

> Sprawdzenie jaka kt贸re commit zmieniay warto zawarto pliku

```bash
git blame <file_name>
```

Pliki mog by zmodyfikowane w r贸偶nych miejscach

| Staged | Modified | File Name |
| ------ | -------- | --------- |
| M      |          | File1     |
| M      | M        | File2     |
| A      |          | File3     |
| ?      | ?        | File4     |

Oznaczenia liter

* Nowe nieledzone pliki maj obok siebie `??`
* Nowe pliki dodane do poczekalni `A`
* Zmodyfikowane pliki `M`

Lewa strona wskazuje na to czy plik jest w poczekalni, a prawa czy jest zmieniony.


## Wycofanie wprowadzonych zmian

Przy zastosowaniu polecenia `git checkout <hash_commit>` przechodzimy w tryb `detached HEAD` (tryb odczonej gowy ). Pozwala to przeglda i eksperymentowa bez zapisywania zmian. Jeli jednak zdecydujemy si na ich zapisanie mo偶emy u偶y komendy `git checkout -b <branch_name>`.

### Zmiany kt贸re nie zostay dodane do staged

Istniej r贸偶ne sposoby przywracania projektu jak r贸wnie偶 pojedynczego pliku.

> `git checkout` - su偶y do przywracania projektu lub pliku do wczeniejszego stanu.

```bash
# przywraca wybrany plik jeli nie by dodany do staging (tylko zmodyfikowany)
git checkout <file_name>
# przywraca wszystkie pliki jeli nie byy dodane do staging (tylko zmodyfikowany)
git checkout .
```

`checkout` przesuwa wska藕nik `HEAD` na wskazany commit. W katalogu zostan wczytane pliki z okrelonego commitu.

Mo偶emy u偶y r贸wnie偶 `git restore`

```bash
# przywraca wybrany plik jeli nie by dodany do staging (tylko zmodyfikowany)
git restore <file_name>
# przywraca wszystkie pliki jeli nie byy dodane do staging (tylko zmodyfikowany)
git restore .
```

### Zmiany kt贸re zostay dodane do staged

Gdy dodamy pliki do `stage` za pomoc `git add <file_name>` mo偶emy wycofa ten stage za pomoc `git restore --stage` a nastpnie tak jak w przypadku pliku kt贸ry by tylko zmodyfikowany przywr贸ci jego stan z ostatniej migawki za pomoc `git restore <file_name>`

```bash
git restore --stage <file_name>
git restore <file_name>
```

Mo偶emy r贸wnie偶 u偶y `git reset` w sytuacji gdy wprowadzilimy ju偶 zmiany do indeksu za pomoc `git add` i chcemy je wycofa.
Jestemy przenoszeni do zatwierdzenia na kt贸re wskazuje znacznik `HEAD` a on wskazuje na ostatni wykonany commit w tej sytuacji ga藕 tak naprawd nie jest przesuwana poniewa偶 wska藕nik cay czas si tam znajduje.

Mo偶emy r贸wnie偶 przywr贸ci pojedynczy plik z ostatniego commit `git reset <file_name`.

``` bash
# Przywr贸cenie wybranego commit
git checkout <hash_commit>

# zapisanie zmian na wybranej gazi
git checkout -b <branch_name>

# powr贸t na wybran ga藕
git checkout master

# nowsza wersja
git switch master
```

### Zmiany kt贸re zostay dodane do repozytorium

Zmiany kt贸re zostay zatwierdzone przez `commit`

> `git reset`

Polecenie zmienia bie偶c ga藕 a co si z tym wi偶e zmienia r贸wnie偶 bie偶ce zatwierdzenie.
`git reset` to wyspecjalizowane polecenie dziki kt贸remu mo偶emy przenie si na dowolny commit (poprzez zmian gazi). Zmiana jest dokonywana razem ze znacznikiem `HEAD`. Aktualnym zatwierdzeniem jest to wybrane przez `git reset`.

:exclamation: Powoduje modyfikacj historii commit (usuwa p贸藕niejsze commit). Zmiany nale偶y wycofa przed wysaniem zmian do zdalnego repozytorium.

Jednym ze sposob贸w u偶ycia `git reset` jest powr贸cenie do wczeniejszej wersji projektu, cofnicie gazi w czasie bez zachowania p贸藕niejszej historii zatwierdze.
Jeli chcemy przywr贸ci pliki do dokadnie takiej wersji jak w migawce we wszystkich obszarach skorzystamy z opcji `--hard`.
Poniewa偶 nie ma ju偶 odniesie do p贸藕niejszych zatwierdze (commit) zostan one wyczyszczone po jakim czasie przez `garbage collector`.

```bash
# Przesunie tylko ga藕 i nie zmodyfikuje pozostaych obszar贸w
git reset --soft

#  skopiuje zmiany z repository do index (domylnie jeli nie dodamy 偶adnego parametru)
git reset --mixed

# skopiuje zmiany z repozytorium do wszystkich pozostaych obszar贸w (working area, index)
git reset --hard
```

Je偶eli nie zastosujemy 偶adnej opcji domylnie bdzie zastosowany `--mixed` i zmiany z repozytorium (z bie偶cego commit) znajd si tylko w obszarze index (plik bdzie mia status `modified`).

```bash
git reset HEAD

# Przywr贸cenie wszystkich plik贸w z repository do working directory
git reset HEAD --hard

```

Jeli mamy wicej ni偶 jeden plik i chcemy zastosowa przywr贸cenie tylko na mim mo偶emy przenie zmiany z **repozytorium** do **stage** i nie zmienia plik贸w w **working directory** a jedynie plik kt贸ry jest w **staging**.

```bash
# Przywr贸cenie tylko jednego pliku z repository do staging
git reset HEAD <file_name>
```

:exclamation: Niestety nie jest mo偶liwe przywr贸cenie pojedynczego pliku z opcj `--hard` za miast tego nale偶y u偶y (w tym przypadku `checkout` nie spowoduje zmiany `HEAD`)

```bash
git checkout HEAD --hard <file_name>
```

> `git revert` - odwraca zmiany z wybranego commit i zapisuje jako nowy commit

Pozwala bezpiecznie przywraca zmiany kt贸re znajduj si ju偶 w repozytorium **zdalnym**.

:bulb: Nie usuwa nie modyfikuje historii zmian i odwraca zmiany tylko w wybranym commit (wczeniejsze commit pozostaj bez zmian).

```bash
git revert <hash_commit>
```

> Pobieranie zmian ze zdalnego repozytorium

`git pull` to poczenie `git fetch` i `git rebase`

```bash
git pull --rebase

# pobranie wszystkich gazi
git pull --all
```

> Dodanie nowej gazi/branch

```bash
git checkout -b <branch_name>

# nowsza wersja
git switch -c <branch_name>
```

> Zmiana nazwy gazi

```bash
# Zmiana nazwy gazi na kt贸rej si obecnie znajdujemy
git branch -m <new_branch_name>

# zmiana nazwy gazi na kt贸rej si nie znajdujemy
git branch -m <old_branch_name> <new_branch_name>
```

> Przeczenie si pomidzy gaziami/branch

```bash
# git checkout master
git checkout <branch_name>

# nowsza wersja
git switch <branch_name>
```

> Sprawdzenie dostpnych gazi/branch

```bash
git branch
```

> Odkadanie zmian na stos / do schowka (stash)

Jeli wprowadzamy zmiany na gazi w ledzonym pliku i nie s one zatwierdzone przy pomocy commit przy pr贸bie zmiany gazi Git nie pozwoli si na ni przeczy bez ich zatwierdzenia. Jeli nie chcemy tego robi mo偶emy zmiany zapisa w schowku.

Zmiany zostan wycofane (do momentu wczeniejszego commit) i zapisane w schowku.

Przy przenoszeniu danych do schowka s tam zapisywane a do **working directory** s kopiowane pliki z ostatniego zatwierdzenia (commit).

W schowku przechowujemy rzeczy kt贸re musimy odo偶y na pewien czas ale nie chcemy ich dodawa do **staging area**.
W schowku s scalone w jeden identyfikator i jest to schowek wielokrotny.

```bash
git stash

# umieszczenie w schowku z dodanym komunikatem
git stash push -m "message"

# dodaje nieledzone pliki do schowka (domylnie git ignoruje pliki kt贸re nie s ledzone)
git stash --include-untracked
```

> Podejrzenie odo偶onych zmian na stosie wraz z identyfikatorem

```bash
git stash list
# stash@{0}: On feature: Nowa zmiana w schowku


> Aby je przywr贸ci lub doda do innej gazi wykorzystujemy polecenie
Jeli nie podamy identyfikatora polecenia przywr贸c ostatni zmian

```bash
# przywraca zmiany i usuwa je ze stosu
git stash pop

# przywraca zmiany i pozostawia na stosie
git stash apply

# przywr贸cenie konkretnego identyfikatora
git stash pop stash@{0}
```

## wicej szczeg贸贸w

```bash
git stash show
```

> Usunicie zmiany ze schowka

```bash
# wyczyszczenie konkretnej zmiany
git stash drop stash@{0}

# wyczyszczenie caego schowka
git stash clear
```

> Utworzenie nowego branch ze zmian zapisanych na stosie

```bash
git stash branch <new_branch_name>
```

> Informacje o zdalnym repozytorium

```bash
git remote
git remote -v

```

> Dodanie zdalnego repozytorium

```bash
git remote add <name> <remote_url>
```

> Wypychanie zmian do zdalnego repozytorium

```bash
# git push origin master
## gp
# -f force, -u default upstream
git push <remote_name> <branch_name>
```

> Usunicie gazi lokalne

```bash
# Usunicie gazi lokalnie
git branch -d <branch_name>

# usunicie gazi kt贸ra ma zatwierdzenia i nie zostaa scalona z inn gazi
git branch -D <branch_name>

# Usunicie gazi na zdalnym repozytorium
# git push -d origin <branch_name>
git push -d <remote_name> <branch_name>
```



> Scalanie zmian z innej gazi/ **Merge**

Jeli podczas rozwoju gazi np. feature g贸wna ga藕 nie zostaa zmieniona i nie ma konflikt贸w zastosowany zostanie `fast forward`.

```bash
# Przeczamy si na branch do kt贸rego chcemy doda zmiany przewa偶nie main
git checkout main
git merge <branch_name>
```

## Rozwizywanie konflikt贸w

W pliku oznaczenie `<<<HEAD` to zatwierdzenie bie偶ce

> Po rozwizaniu konfliktu

```bash
# po edycji i rozwizaniu pliku musimy go doda do stage
git add <file_name>

# nastpnie wykonujemy commit
git commit -m "commit_message"

git rebase --continue
```


## Narzdzia

## Praca z GIT

### Podstawkowe zasady

* Podczas wprowadzania nowej funkcjonalnoci tworzymy nowy `branch`

## Do Sprawdzenia

Przy korzystaniu z WSL i personal token na github konieczne podlinkowanie credential managera z windowsa do debiana

```bash
git config --global credential.helper "/mnt/c/Program\ Files/Git/mingw64/libexec/git-core/git-credential-manager.exe"
```

C:\Users\kudzi\OneDrive\Dokumenty\WindowsPowerShell\Modules\oh-my-posh\3.175.0\themes
